(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(e){if(e.ep)return;e.ep=!0;const r=t(e);fetch(e.href,r)}})();function i(s){const n=document.getElementById("search-form"),t=document.getElementById("search-input");n.addEventListener("submit",o=>{o.preventDefault();const e=t.value.trim();if(!e){document.getElementById("results").innerHTML="<p>Please enter a search term.</p>";return}s(e)})}function a(s){const n=document.getElementById("results");if(n.innerHTML="",!s.length){n.innerHTML="<p>No results found. Try a different title or author.</p>";return}const t=document.createElement("div");t.classList.add("results-grid"),s.forEach(o=>{const e=o.cover_i?`https://covers.openlibrary.org/b/id/${o.cover_i}-M.jpg`:"/public/placeholder.png",r=document.createElement("div");r.classList.add("book-card"),r.innerHTML=`
      <img src="${e}" alt="${o.title}" class="book-cover">
      <h3>${o.title}</h3>
      <p>${o.author_name?o.author_name.join(", "):"Unknown Author"}</p>
      <button class="details-btn" data-key="${o.key}">View Details</button>
    `,t.appendChild(r)}),n.appendChild(t)}async function l(s){const n=`https://openlibrary.org/search.json?q=${encodeURIComponent(s)}`;try{const t=await fetch(n);if(!t.ok)throw new Error(`HTTP Error: ${t.status}`);return(await t.json()).docs.slice(0,20)}catch(t){throw console.error("Error fetching Open Library data:",t),t}}i(async s=>{const n=document.getElementById("results");n.innerHTML='<p class="loading">Searching...</p>';try{const t=await l(s);a(t)}catch(t){n.innerHTML='<p class="error">Error fetching results. Please try again.</p>',console.error(t)}});
